{"version":3,"sources":["webpack:///webpack/bootstrap 44bf530b2c10a7e18ecf","webpack:///./src/index.js","webpack:///./src/spellFactory.js","webpack:///external \"rescope\"","webpack:///external \"is\"","webpack:///./src/spellsLib.js"],"names":["SimpleObjectProto","constructor","spells","castTypesToAppliable","castTypes","isSpell","caster","argz","hasOwnProperty","value","addCaster","fn","argz2","cast","shift","typeName","string","name","displayName","test","prefix","memberDescr","bool","array","casterName","toUpperCase","substr","doCast","applyCastableType","isCastableType","slice","unshift","Comp","member","stateScope","castable","i","length","undefined","console","warn","all","object","v","stateMap","obj","ref","cfg","use","state","stateMapToRefList","scope","bind"],"mappings":"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","file":"dist/rescopeSpells.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 44bf530b2c10a7e18ecf","/*\r\n * Copyright (c)  2018 Wise Wild Web .\r\n *\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"Software\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in all\r\n *  copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\n *  SOFTWARE.\r\n *\r\n * @author : Nathanael Braun\r\n * @contact : caipilabs@gmail.com\r\n */\r\n\r\nimport \"./spellFactory\";\r\nimport \"./spellsLib\";\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","/*\r\n * Copyright (c)  2018 Wise Wild Web .\r\n *\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"Software\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in all\r\n *  copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\n *  SOFTWARE.\r\n *\r\n * @author : Nathanael Braun\r\n * @contact : caipilabs@gmail.com\r\n */\r\nimport rescope from \"rescope\";\r\nimport is from \"is\";\r\n// will use as external the index in dist\r\n\r\nconst SimpleObjectProto = ({}).constructor;\r\nrescope.spells        = {};\r\n\r\nlet castTypesToAppliable = {};\r\nlet castTypes            = {};\r\n\r\nrescope.isSpell = function caster( ...argz ) {\r\n    // are we decorating a member / without argz\r\n    if ( argz[0] instanceof SimpleObjectProto && argz[2] instanceof SimpleObjectProto && argz[0].hasOwnProperty(argz[1]) ) {\r\n        argz[2].value = addCaster(argz[0][argz[1]], argz);\r\n        return argz[0];\r\n    }\r\n    else if ( !is.fn(argz[0]) ) {\r\n        return ( ...argz2 ) => {\r\n            // are we decorating a member / with argz\r\n            if ( argz2[0] instanceof SimpleObjectProto && argz2[2] instanceof SimpleObjectProto && argz2[0].hasOwnProperty(argz2[1]) ) {\r\n                argz2[2].value = addCaster(argz2[0][argz2[1]], ...argz, argz2);\r\n                return argz2[0];\r\n            }\r\n            else\r\n                return caster(argz2[0], ...argz);\r\n        }\r\n    }\r\n    return addCaster(...argz);\r\n}\r\n\r\nfunction addCaster( ...argz ) {\r\n    let cast = (!argz[0] || is.fn(argz[0])) && argz.shift();\r\n    if ( !cast )\r\n        throw \"ReScope cast : bad decorator function\"\r\n    let typeName    = (!argz[0] || is.string(argz[0])) && argz.shift() || cast.name || cast.displayName,\r\n        test        = (!argz[0] || is.fn(argz[0])) && argz.shift(),\r\n        prefix      = (!argz[0] || is.string(argz[0])) && argz.shift() || \"as\",\r\n        memberDescr = (!argz[0] || is.bool(argz[0]) || is.array(argz[0])) && argz.shift() || true,\r\n        casterName  = typeName && (prefix + typeName[0].toUpperCase() + typeName.substr(1));\r\n    \r\n    \r\n    if ( !castTypesToAppliable[typeName] ) {\r\n        castTypesToAppliable[typeName] = [];\r\n        \r\n        rescope.spells[casterName] = castTypes[typeName] =\r\n            function doCast( ...argz ) {\r\n                // are we decorating a member / without argz\r\n                if ( argz[0] instanceof SimpleObjectProto && argz[2] instanceof SimpleObjectProto && argz[0].hasOwnProperty(argz[1]) ) {\r\n                    argz[0][argz[1]] = applyCastableType(typeName, argz[0][argz[1]], [], argz);\r\n                    return argz[0];\r\n                }\r\n                else if ( !isCastableType(typeName, argz[0]) ) {\r\n                    return ( ...argz2 ) => {\r\n                        // are we decorating a member / with argz\r\n                        if ( argz2[0] instanceof SimpleObjectProto && argz2[2] instanceof SimpleObjectProto && argz2[0].hasOwnProperty(argz2[1]) ) {\r\n                            argz2[0][argz2[1]] = applyCastableType(typeName, argz2[0][argz2[1]], argz, argz2);\r\n                            return argz2[0];\r\n                        }\r\n                        else\r\n                            return doCast(argz2[0], ...argz);\r\n                    }\r\n                }\r\n                return applyCastableType(typeName, argz[0], argz.slice(1));\r\n            };\r\n    }\r\n    castTypesToAppliable[typeName].unshift(\r\n        {\r\n            typeName, test, memberDescr, cast\r\n        }\r\n    )\r\n    return cast;\r\n}\r\n\r\nfunction isCastableType( typeName, Comp, member, stateScope ) {\r\n    let castable = castTypesToAppliable[typeName];\r\n    for ( let i = 0; i < castable.length; i++ )\r\n        if (\r\n            (member === undefined || !!member == !!castable[i].memberDescr)\r\n            && castable[i].test(Comp)\r\n        )\r\n            return castable[i];\r\n    \r\n    return false;\r\n    \r\n}\r\n\r\nfunction applyCastableType( typeName, Comp, argz, member, stateScope ) {\r\n    \r\n    let castable = castTypesToAppliable[typeName] || [];\r\n    for ( let i = 0; i < castable.length; i++ )\r\n        if (\r\n            (member === undefined || !!member == !!castable[i].memberDescr)\r\n            && castable[i].test(Comp)\r\n        )\r\n            return castable[i].cast(Comp, argz, member)\r\n                ;\r\n    \r\n    console.warn(\"reScope cast : Unknown type\", typeName, Comp)\r\n    return false;\r\n    \r\n}\r\n\r\nexport default rescope;\n\n\n// WEBPACK FOOTER //\n// ./src/spellFactory.js","module.exports = require(\"rescope\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"rescope\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"is\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"is\"\n// module id = 3\n// module chunks = 0","/*\r\n * Copyright (c)  2018 Wise Wild Web .\r\n *\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"Software\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in all\r\n *  copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\n *  SOFTWARE.\r\n *\r\n * @author : Nathanael Braun\r\n * @contact : caipilabs@gmail.com\r\n */\r\n\r\nimport is from \"is\";\r\nimport {isSpell, spells, Store, Scope} from \"rescope\";\r\n\r\n\r\nlet all = {\r\n    @isSpell(\"stateMap\", v => (is.object(v) || is.string(v)))\r\n    stateMap( obj, { 0: cfg }, ref ) {\r\n        let use = [], state = {};\r\n        Scope.stateMapToRefList(obj, state, use)\r\n        return class StateMap extends Store {\r\n            static use         = use;\r\n            static state       = state;\r\n            static displayName = ref[1]\r\n        }\r\n    },\r\n    @isSpell(\"scope\", v => (is.object(v)))\r\n    scope( obj, { 0: cfg }, ref ) {\r\n        \r\n        return Scope.bind(null, obj, cfg)\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/spellsLib.js"],"sourceRoot":""}