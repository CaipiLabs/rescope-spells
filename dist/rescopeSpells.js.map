{"version":3,"sources":["webpack:///webpack/bootstrap c74364a82f0f0db37712","webpack:///./src/index.js","webpack:///external \"rescope\"","webpack:///./src/spellFactory.js","webpack:///external \"is\"","webpack:///./src/spellsLib.js","webpack:///external \"react\"","webpack:///external \"react-dom/server\"","webpack:///external \"react-rescope\""],"names":["spells","SimpleObjectProto","constructor","castTypesToAppliable","castTypes","isSpell","caster","argz","hasOwnProperty","value","addCaster","fn","argz2","cast","shift","typeName","string","name","displayName","test","prefix","memberDescr","bool","array","casterName","toUpperCase","substr","doCast","applyCastableType","isCastableType","slice","unshift","Comp","member","stateScope","castable","i","length","undefined","console","warn","RSComp","props","children","Lib","object","v","stateMap","obj","ref","cfg","use","state","actions","stateMapToRefList","scope","map","cfg2","renderer","sm","arguments","_compScope","key","RSRenderer","parent","$scope","autoDestroy","retain","__snapshot","snapshot","output","serialize","restore","dispose","d","s","c","RSCompRenderer","comp","ctx","viewScope","rootRenderer","$stores","Component","snap","scopeObj","getSnapshotByKeyExt","_id","data","$actions","$store","store","bind","apply"],"mappings":"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","file":"dist/rescopeSpells.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c74364a82f0f0db37712","/*\r\n * Copyright (c)  2018 Wise Wild Web .\r\n *\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"Software\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in all\r\n *  copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\n *  SOFTWARE.\r\n *\r\n * @author : Nathanael Braun\r\n * @contact : caipilabs@gmail.com\r\n */\r\nimport rescope from \"rescope\";\r\nimport \"./spellFactory\";\r\nimport \"./spellsLib\";\r\n\r\nexport default rescope.spells;\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"rescope\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"rescope\"\n// module id = 1\n// module chunks = 0","/*\r\n * Copyright (c)  2018 Wise Wild Web .\r\n *\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"Software\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in all\r\n *  copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\n *  SOFTWARE.\r\n *\r\n * @author : Nathanael Braun\r\n * @contact : caipilabs@gmail.com\r\n */\r\nimport rescope from \"rescope\";\r\nimport is from \"is\";\r\n// will use as external the index in dist\r\n\r\nconst SimpleObjectProto = ({}).constructor;\r\nrescope.spells        = {};\r\n\r\nlet castTypesToAppliable = {};\r\nlet castTypes            = {};\r\n\r\nrescope.isSpell = function caster( ...argz ) {\r\n    // are we decorating a member / without argz\r\n    if ( argz[0] instanceof SimpleObjectProto && argz[2] instanceof SimpleObjectProto && argz[0].hasOwnProperty(argz[1]) ) {\r\n        argz[2].value = addCaster(argz[0][argz[1]], argz);\r\n        return argz[0];\r\n    }\r\n    else if ( !is.fn(argz[0]) ) {\r\n        return ( ...argz2 ) => {\r\n            // are we decorating a member / with argz\r\n            if ( argz2[0] instanceof SimpleObjectProto && argz2[2] instanceof SimpleObjectProto && argz2[0].hasOwnProperty(argz2[1]) ) {\r\n                argz2[2].value = addCaster(argz2[0][argz2[1]], ...argz, argz2);\r\n                return argz2[0];\r\n            }\r\n            else\r\n                return caster(argz2[0], ...argz);\r\n        }\r\n    }\r\n    return addCaster(...argz);\r\n}\r\n\r\nfunction addCaster( ...argz ) {\r\n    let cast = (!argz[0] || is.fn(argz[0])) && argz.shift();\r\n    if ( !cast )\r\n        throw \"ReScope cast : bad decorator function\"\r\n    let typeName    = (!argz[0] || is.string(argz[0])) && argz.shift() || cast.name || cast.displayName,\r\n        test        = (!argz[0] || is.fn(argz[0])) && argz.shift(),\r\n        prefix      = (!argz[0] || is.string(argz[0])) && argz.shift() || \"as\",\r\n        memberDescr = (!argz[0] || is.bool(argz[0]) || is.array(argz[0])) && argz.shift() || true,\r\n        casterName  = typeName && (prefix + typeName[0].toUpperCase() + typeName.substr(1));\r\n    \r\n    \r\n    if ( !castTypesToAppliable[typeName] ) {\r\n        castTypesToAppliable[typeName] = [];\r\n        \r\n        rescope.spells[casterName] = castTypes[typeName] =\r\n            function doCast( ...argz ) {\r\n                // are we decorating a member / without argz\r\n                if ( argz[0] instanceof SimpleObjectProto && argz[2] instanceof SimpleObjectProto && argz[0].hasOwnProperty(argz[1]) ) {\r\n                    argz[0][argz[1]] = applyCastableType(typeName, argz[0][argz[1]], [], argz);\r\n                    return argz[0];\r\n                }\r\n                else if ( !isCastableType(typeName, argz[0]) ) {\r\n                    return ( ...argz2 ) => {\r\n                        // are we decorating a member / with argz\r\n                        if ( argz2[0] instanceof SimpleObjectProto && argz2[2] instanceof SimpleObjectProto && argz2[0].hasOwnProperty(argz2[1]) ) {\r\n                            argz2[0][argz2[1]] = applyCastableType(typeName, argz2[0][argz2[1]], argz, argz2);\r\n                            return argz2[0];\r\n                        }\r\n                        else\r\n                            return doCast(argz2[0], ...argz);\r\n                    }\r\n                }\r\n                return applyCastableType(typeName, argz[0], argz.slice(1));\r\n            };\r\n    }\r\n    castTypesToAppliable[typeName].unshift(\r\n        {\r\n            typeName, test, memberDescr, cast\r\n        }\r\n    )\r\n    return cast;\r\n}\r\n\r\nfunction isCastableType( typeName, Comp, member, stateScope ) {\r\n    let castable = castTypesToAppliable[typeName];\r\n    for ( let i = 0; i < castable.length; i++ )\r\n        if (\r\n            (member === undefined || !!member == !!castable[i].memberDescr)\r\n            && castable[i].test(Comp)\r\n        )\r\n            return castable[i];\r\n    \r\n    return false;\r\n    \r\n}\r\n\r\nfunction applyCastableType( typeName, Comp, argz, member, stateScope ) {\r\n    \r\n    let castable = castTypesToAppliable[typeName] || [];\r\n    for ( let i = 0; i < castable.length; i++ )\r\n        if (\r\n            (member === undefined || !!member == !!castable[i].memberDescr)\r\n            && castable[i].test(Comp)\r\n        )\r\n            return castable[i].cast(Comp, argz, member)\r\n                ;\r\n    \r\n    console.warn(\"reScope cast : Unknown type\", typeName, Comp)\r\n    return false;\r\n    \r\n}\r\n\r\nexport default rescope;\n\n\n// WEBPACK FOOTER //\n// ./src/spellFactory.js","module.exports = require(\"is\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"is\"\n// module id = 3\n// module chunks = 0","/*\r\n * Copyright (c)  2018 Wise Wild Web .\r\n *\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"Software\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in all\r\n *  copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\n *  SOFTWARE.\r\n *\r\n * @author : Nathanael Braun\r\n * @contact : caipilabs@gmail.com\r\n */\r\nimport React from \"react\";\r\n\r\nimport { renderToString } from \"react-dom/server\"\r\nimport is                 from \"is\";\r\nimport {\r\n    isSpell, spells, Store, Scope, reScope, propsToScope, scopeToProps, Component,\r\n    scopeToState\r\n}                         from \"react-rescope\";\r\n\r\n@propsToScope([ 'props' ])\r\n@scopeToProps([ 'props' ])\r\nclass RSComp extends Component {\r\n    render() {\r\n        return this.props.children || [];\r\n    }\r\n}\r\n\r\nlet Lib = {\r\n    @isSpell(\"stateMap\", v => ( is.object(v) || is.string(v) ))\r\n    stateMap( obj, { 0: cfg }, ref ) {\r\n        let use = [], state = {}, actions = {};\r\n        Scope.stateMapToRefList(obj, state, use, actions)\r\n        return class StateMap extends Store {\r\n            static displayName = ref[ 1 ];\r\n            static use         = use;\r\n            static state       = state;\r\n            static actions     = actions;\r\n        }\r\n    },\r\n    @isSpell(\"scope\", v => ( is.object(v) ))\r\n    scope( obj, { 0: cfg }, ref ) {\r\n        return class childScope extends Scope {\r\n            constructor( map, cfg2 ) {\r\n                super({ ...obj, ...map }, { ...cfg, ...cfg2 });\r\n            }\r\n        }\r\n    },\r\n    @isSpell(\"renderer\", v => ( is.fn(v) ))\r\n    renderer( obj, argz, ref ) {\r\n        let use,\r\n            state,\r\n            scope = argz[ 1 ] && argz[ 0 ],\r\n            sm    = argz[ 1 ] || argz[ 0 ];\r\n        //if ( !argz[ 0 ] ) {\r\n        state     = {};\r\n        //argz[ 0 ] = []\r\n        //}\r\n        //else if ( is.array(argz[ 0 ]) ) {\r\n        //    use   = argz[ 0 ];\r\n        //    state = !use.length && {};\r\n        //}\r\n        //else\r\n        //    argz[ 0 ] && Scope.stateMapToRefList(argz[ 0 ], state = {}, use = [],\r\n        // actions = {});\r\n        \r\n        //!use.includes('props') && use.push('props');\r\n        return class RSRenderer extends Store {\r\n            static displayName = ref[ 1 ];\r\n            //static use         = use;\r\n            static state       = state;\r\n            \r\n            constructor( scope, cfg ) {\r\n                super(...arguments);\r\n                this._compScope = new Scope(\r\n                    {},\r\n                    {\r\n                        key        : RSRenderer.displayName,\r\n                        parent     : this.$scope,\r\n                        autoDestroy: true,\r\n                        \r\n                    }\r\n                )\r\n                \r\n                this._compScope.retain(\"RSRenderer\");\r\n                this.__snapshot = cfg.snapshot;\r\n            }\r\n            \r\n            serialize( cfg, output ) {\r\n                super.serialize(...arguments)\r\n                this._compScope.serialize(...arguments)\r\n                return output;\r\n            }\r\n            \r\n            restore() {\r\n                super.restore(...arguments)\r\n                this._compScope.restore(...arguments)\r\n            }\r\n            \r\n            destroy() {\r\n                this._compScope.dispose(\"RSRenderer\");\r\n                super.destroy();\r\n            }\r\n            \r\n            apply( d, s, c ) {\r\n                if ( d ) {\r\n                    //this._comp.setState(c);\r\n                    return d;\r\n                }\r\n                \r\n                @scopeToState(\r\n                    ( comp, props, ctx ) => {\r\n                        let viewScope = new Scope(\r\n                            {\r\n                                [ RSRenderer.displayName ]: Lib.rootRenderer(obj, [ sm ], [ , RSRenderer.displayName ]),\r\n                                ...( scope || {} )\r\n                            },\r\n                            {\r\n                                key        : \"comp\",\r\n                                parent     : this._compScope,\r\n                                autoDestroy: true,\r\n                                \r\n                                state: { [ RSRenderer.displayName ]: { props } }\r\n                            }\r\n                        )\r\n                        return viewScope;\r\n                    },\r\n                    [ RSRenderer.displayName ])\r\n                class RSCompRenderer extends React.Component {\r\n                    constructor() {\r\n                        super(...arguments);\r\n                        \r\n                    }\r\n                    \r\n                    componentWillMount() {\r\n                        var props     = this.props;\r\n                        //this._ssrTest = setTimeout(\r\n                        //    tm => this.$scope.then(\r\n                        //        ( { [ RSRenderer.displayName ]: CMP } ) =>\r\n                        //            renderToString(<RSCompRenderer { ...props }/>)\r\n                        //    ))\r\n                    }\r\n                    \r\n                    componentDidMount() {\r\n                        //clearTimeout(this._ssrTest);\r\n                    }\r\n                    \r\n                    componentWillReceiveProps( props ) {\r\n                        let Comp = this.$stores[ RSRenderer.displayName ];\r\n                        \r\n                        //Comp && Comp.setState({ props });\r\n                    }\r\n                    \r\n                    render() {\r\n                        let Comp = this.state[ RSRenderer.displayName ];\r\n                        return Comp ||\r\n                               <span className={ \"__rsLoad\" }/>\r\n                    }\r\n                }\r\n                \r\n                return RSCompRenderer;\r\n            }\r\n        }\r\n    },\r\n    \r\n    @isSpell(\"rootRenderer\", v => ( is.fn(v) ))\r\n    rootRenderer( obj, argz, ref ) {\r\n        \r\n        let use,\r\n            state,\r\n            actions;\r\n        if ( !argz[ 0 ] ) {\r\n            state = {};\r\n            //argz[ 0 ] = []\r\n        }\r\n        else if ( is.array(argz[ 0 ]) ) {\r\n            use   = argz[ 0 ];\r\n            state = !use.length && {};\r\n        }\r\n        else\r\n            argz[ 0 ] && Scope.stateMapToRefList(argz[ 0 ], state = {}, use = [], actions = {});\r\n        \r\n        //!use.includes('props') && use.push('props');\r\n        return class RSRenderer extends Store {\r\n            static displayName = ref[ 1 ];\r\n            static use         = use;\r\n            static state       = state || {};\r\n            static actions     = actions;\r\n            \r\n            //static actions     = actions;\r\n            serialize( cfg, output ) {\r\n                super.serialize(...arguments);\r\n                let snap = this.scopeObj.getSnapshotByKeyExt(output, this.$scope._id + '/' + this.name);\r\n                if ( snap.state && snap.state.props )\r\n                    delete snap.state.props;\r\n                delete snap.data;\r\n                return output;\r\n            }\r\n            \r\n            apply( d, s, c ) {\r\n                //if ( d ) {\r\n                //    //this._comp.setState(c);\r\n                //    return d;\r\n                //}\r\n                return obj(s, {\r\n                    $actions: this.$actions,\r\n                    $stores : this.$stores,\r\n                    $scope  : this.$scope,\r\n                    $store  : this\r\n                })\r\n            }\r\n        }\r\n    }\r\n    ,\r\n    @isSpell(\"store\", v => ( is.fn(v) ))\r\n    store( obj, { 0: cfg }, ref ) {\r\n        return Store.bind(null, obj, { ...cfg, apply: ( d, s, c ) => obj(d, s, c) })\r\n    }\r\n}\r\n\r\nexport default Lib;\n\n\n// WEBPACK FOOTER //\n// ./src/spellsLib.js","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"react-dom/server\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-dom/server\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"react-rescope\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-rescope\"\n// module id = 7\n// module chunks = 0"],"sourceRoot":""}